/*
 * @Author: LXK9301 https://github.com/LXK9301
 * @Date: 2020-11-12 11:42:12 
 * @Last Modified by: LXK9301
 * @Last Modified time: 2021-1-22 14:27:20
 */
/*
东东小窝 https://gitee.com/lxk0301/jd_scripts/raw/master/jd_small_home.js
现有功能：
做日常任务任务，每日抽奖（有机会活动京豆，使用的是免费机会，不消耗WO币）
自动使用WO币购买装饰品可以获得京豆，分别可获得5,20，50,100,200,400,700，1200京豆）

注：目前使用此脚本会给脚本内置的两个码进行助力，请知晓

活动入口：京东APP我的-游戏与更多-东东小窝
或 京东APP首页-搜索 玩一玩-DIY理想家
微信小程序入口：
来客有礼 - > 首页 -> 东东小窝
网页入口（注：进入后不能再此刷新，否则会有问题，需重新输入此链接进入）
https://h5.m.jd.com/babelDiy/Zeus/2HFSytEAN99VPmMGZ6V4EYWus1x/index.html
TED演讲：你今天的努力，决定你明天的样子
文章来源：TED演讲 文章作者：enread 发布时间：2020-03-25 06:22 字体： [大 中 小]　 进入论坛
(单词翻译:双击或拖选)

What I'd like to start off with is an observation, which is that if I've learned anything over the last year, it's that the supreme1 irony2 of publishing a book about slowness is that you have to go around promoting it really fast. I seem to spend most of my time these days zipping from city to city, studio to studio, interview to interview, serving up the book in really tiny bite-size chunks3. Because everyone these days wants to know how to slow down, but they want to know how to slow down really quickly. So ... so I did a spot on CNN the other day where I actually spent more time in makeup4 than I did talking on air. And I think that -- that's not really surprising though, is it? Because that's kind of the world that we live in now, a world stuck in fast-forward.
在演讲开始，我愿意先讲一个事情， 如果说去年有什么让我印象深刻， 就是极具讽刺意味的 出版一本号召讲将速度慢下来的书 你却不得不超快速的四处推销它。 我这些日子花了大部分时间， 在城市、演播室以及 访谈节目之间奔走， 但实际用来宣传书的时间却少的可怜。 因为现在每个人 都想知道该如何放慢速度， 然而，他们却想要知道如何超快速的放慢速度。所以... 前不久我在CNN上了一个通告 在那，我上电视的时间还没有化妆的时间长 而我想这还真算不上让人吃惊的事，对吧？ 因为我们现在所处的，就是一个这样的世界 一个沉溺于追求快速前进的世界。
 
A world obsessed5 with speed, with doing everything faster, with cramming6 more and more into less and less time. Every moment of the day feels like a race against the clock. To borrow a phrase from Carrie Fisher, which is in my bio there; I'll just toss it out again -- "These days even instant gratification takes too long." (Laughter) And if you think about how we to try to make things better, what do we do? No, we speed them up, don't we? So we used to dial; now we speed dial. We used to read; now we speed read. We used to walk; now we speed walk. And of course, we used to date and now we speed date. And even things that are by their very nature slow -- we try and speed them up too. So I was in New York recently, and I walked past a gym that had an advertisement in the window for a new course, a new evening course. And it was for, you guessed it, speed yoga. So this -- the perfect solution for time-starved professionals who want to, you know, salute7 the sun, but only want to give over about 20 minutes to it. I mean, these are sort of the extreme examples, and they're amusing and good to laugh at.
一个迷恋速度的世界， 做每一件事情都追求更快，往越来越少的时间里 填鸭进更多的东西。 每一天每一刻都感觉像 在和时间赛跑 引用凯利.费雪（美国影星）的一句话，这句话 在我的自传里面有写，我只是再次引用 “现在大家连瞬间得到的快感（高潮）都嫌太久。” 另外 假如让你想我们怎样才能将事情做得更好，会有什么主意？ 我们会加速做事情，不是么？所以，以前我们拨电话；现在我们快拨。 以前我们阅读；现在我们快读。以前我们走路，现在我们快走。 当然还有，以前我们约会，现在我们速食约会。 即使是那些本身就需要慢慢做的事情 我们也千方百计加速做。 我最近在纽约，路过一家健身馆 他们橱窗上有一个新课程的广告，是个晚间课程。 你猜得到吗，是关于快速瑜伽的。 这个就是为超级没时间的上班族们提供的最佳解决方案 这些人，想要练习（瑜伽）拜日式 但却只想花大约20分钟在这上面。 我想，这些都是有点儿极端的例子，而且都有些意思，可以当笑话听。
 
But there's a very serious point, and I think that in the headlong dash of daily life, we often lose sight of the damage that this roadrunner form of living does to us. We're so marinated in the culture of speed that we almost fail to notice the toll8 it takes on every aspect of our lives -- on our health, our diet, our work, our relationships, the environment and our community. And sometimes it takes a wake-up call, doesn't it, to alert us to the fact that we're hurrying through our lives, instead of actually living them; that we're living the fast life, instead of the good life. And I think for many people, that wake-up call takes the form of an illness. You know, a burnout, or eventually the body says, "I can't take it anymore," and throws in the towel. Or maybe a relationship goes up in smoke because we haven't had the time, or the patience, or the tranquility, to be with the other person, to listen to them.
但是，这些例子也说明了一个非常严肃的问题， 在每天匆匆忙忙的生活中， 我们常常看不到 这种竞走式的生活方式给我们带来的伤害。 我们已经在速食文化中淫浸得太深了 以至于我们几乎觉察不到它让 我们在生活方方面面所付出的代价。 对我们的健康，饮食，工作 人际关系，环境以及生活的社区都产生了消极的影响。 而有时候只要 一声警示来 提醒我们正在匆忙地度过我们的生命， 而不是真正有意义的过生活；提醒我们 我们在过快日子，而不是在过好日子。 而我认为对很多人而言，那个警示铃 常常是以疾病的形式出现。 疾病突然爆发，最后身体对你说 “我再也受不了了。”然后就垮了。 也许这个警示会在一场恋爱化为泡影后出现 失败是因为我们抑或没有时间，抑或没有耐心， 或是不能安静地 陪着另一半，倾听他们的述说。
 
And my wake-up call came when I started reading bedtime stories to my son, and I found that at the end of day, I would go into his room and I just couldn't slow down -- you know, I'd be speed reading "The Cat In The Hat." I'd be -- you know, I'd be skipping lines here, paragraphs there, sometimes a whole page, and of course, my little boy knew the book inside out, so we would quarrel. And what should have been the most relaxing, the most intimate, the most tender moment of the day, when a dad sits down to read to his son, became instead this kind of gladiatorial battle of wills, a clash between my speed and his slowness. And this went on for some time, until I caught myself scanning a newspaper article with timesaving tips for fast people. And one of them made reference to a series of books called "The One-Minute Bedtime Story." And I wince9 saying those words now, but my first reaction at the time was very different. My first reflex was to say, "Hallelujah -- what a great idea! This is exactly what I'm looking for to speed up bedtime even more." But thankfully, a light bulb went on over my head, and my next reaction was very different, and I took a step back, and I thought, "Whoa -- you know, has it really come to this? Am I really in such a hurry that I'm prepared to fob off my son with a sound byte at the end of the day?" And I put away the newspaper -- and I was getting on a plane -- and I sat there, and I did something I hadn't done for a long time -- which is I did nothing. I just thought, and I thought long and hard. And by the time I got off that plane, I'd decided10 I wanted to do something about it. I wanted to investigate this whole roadrunner culture, and what it was doing to me and to everyone else.
而我的警示铃是在我开始 为我儿子念睡前故事的时候响起的， 我发现在一天结束之时， 我走进他的房间，就是不能把自己的速度慢下来 我会很快的念《戴帽子的猫》 我会这儿跳过几句， 那儿概括几句，有时几句话概括一整页的内容 当然，我的小儿子对这本书倒背如流，所以我们就会争起来。 当一个爸爸坐下来，为他的儿子读故事， 这本最应该是一天中最放松，最亲密， 最亲切柔软的时刻， 反而变成了这种角斗士般关于意志的争斗； 变成了他要快我要... 不，是我要快他要慢而引起的冲突 而且这种情况持续了一段时间， 直到我读了报纸上的一篇文章 是为追求快速的人提供的省时窍门。 其中一个窍门引用了一系列丛书作参考，叫做 “一分钟的床前故事。” 而我，现在真不愿意承认 但是我那时的第一反应和现在非常的不同。 我的第一反应是说， “哈利路亚——这是个多么棒的点子！ 这正好能帮我把床前故事讲的更快一些。” 但还好， 我头脑一清醒，而我的下面的反应就非常不同了， 我退回一步想， “停，真的达到这种地步了吗？ 我真的忙到这种地步，要 在一天结束的时候，用一分钟故事来敷衍我儿子？” 然后我把报纸拿开 我那时正在飞机上，我坐在那儿， 做了一件我很久没做过的事情——那就是我什么都没做。 我就只是在思考，深思了很久时间。 而当我下飞机的时候，我决定我要对此做些什么。 我要研究整个的速食文化， 以及这个文化对我，对其他人都产生了什么影响。
 
And I had two questions in my head. The first was, how did we get so fast? And the second is, is it possible, or even desirable, to slow down? Now, if you think about how our world got so accelerated, the usual suspects rear their heads. You think of, you know, urbanization, consumerism, the workplace, technology. But I think if you cut through those forces, you get to what might be the deeper driver, the nub of the question, which is how we think about time itself. In other cultures, time is cyclical. It's seen as moving in great, unhurried circles. It's always renewing and refreshing11 itself. Whereas in the West, time is linear. It's a finite resource; it's always draining away. You either use it, or lose it. "Time is money," as Benjamin Franklin said. And I think what that does to us psychologically is it creates an equation. Time is scarce, so what do we do? Well -- well, we speed up, don't we? We try and do more and more with less and less time. We turn every moment of every day into a race to the finish line -- a finish line, incidentally, that we never reach, but a finish line nonetheless. And I guess that the question is, is it possible to break free from that mindset? And thankfully, the answer is yes, because what I discovered, when I began looking around, that there is a global backlash against this culture that tells us that faster is always better, and that busier is best.
在我脑海中产生了两个问题。 第一个问题是，我们怎么变得这么快的？ 第二个问题是，有没有可能慢下来， 或者，我们想慢下来么？ 现在，假如你思考 我们的世界是如何变得如此加速向前的，通常都怀疑是下面这些引起的 我们会想到城市化， 消费主义，工厂，技术。 但是我想，如果你透过 这些方面，你会思考到可能是更深层的 驱动力问题，这个问题的核心， 就是我们如何看待时间本身。 在其它文化中，时间是循环往复的。 时间看起来是在巨大的 从容不迫的循环中移动。 时间总是在不断复活，不断更新。 而在西方，时间是直线性的。 时间是有限资源， 总是不断在衰竭。 你要么使用时间，要么失去时间。 就像本杰明·富兰克林说的那样，时间就是金钱。 我想这句话对我们心理上产生的影响 是这样的影响——它创造出一个平衡式。 时间非常有限，所以我们怎么办？ 于是，我们就加速运转，不是么？ 我们试着用更少的时间做更多的事。 我们把每一天的每一刻 都变成向终点线的赛跑。 那一终点线，顺便说一句，我们却从未到达过， 但是那仍然还是一条终点线。 那么我想问题是， 有没有可能从这一习惯性思维中跳出来？ 还好，答案是“有可能”，因为 当我开始环顾四周，我发现，有一种 全球性的反抗力量存在，反抗这种高速度文化 这种高速度文化告诉我们越快越好，而且越忙越好。
 
Right across the world, people are doing the unthinkable: they're slowing down, and finding that, although conventional wisdom tells you that if you slow down, you're road kill, the opposite turns out to be true: that by slowing down at the right moments, people find that they do everything better. They eat better; they make love better; they exercise better; they work better; they live better. And, in this kind of cauldron of moments and places and acts of deceleration, lie what a lot of people now refer to as the "International Slow Movement."
在全世界，有人做着意想不到的事： 他们放慢节奏，而且发现 尽管习惯思维告诉你，假如你放慢节奏，就会被时代潮流抛弃， 而事实上结果却相反。 在合适的时候放慢节奏， 人们发现他们做什么都做得更好。 他们吃得更好，性生活更和谐，锻炼效果更好， 他们工作更棒，生活得也更好。 而在这些时刻，这些地方， 这些减速的行动中， 就存在着许多人所说的 国际慢活运动。
 
Now if you'll permit me a small act of hypocrisy12, I'll just give you a very quick overview13 of what's going on inside the Slow Movement. If you think of food, many of you will have heard of the Slow Food movement. Started in Italy, but has spread across the world, and now has 100,000 members in 50 countries. And it's driven by a very simple and sensible message, which is that we get more pleasure and more health from our food when we cultivate, cook and consume it at a reasonable pace. I think also the explosion of the organic farming movement, and the renaissance14 of farmers' markets, are other illustrations of the fact that people are desperate to get away from eating and cooking and cultivating their food on an industrial timetable. They want to get back to slower rhythms. And out of the Slow Food movement has grown something called the Slow Cities movement, which has started in Italy, but has spread right across Europe and beyond. And in this, towns begin to rethink how they organize the urban landscape, so that people are encouraged to slow down and smell the roses and connect with one another. So they might curb15 traffic, or put in a park bench, or some green space.
现在，假如你允许我言行小小的不一致， 我将为你快速的概括一下—— 慢活运动中人们正在做些什么。若你们关心吃食， 那你们中许多人应该听过慢食运动。 这场运动开始于意大利，但已传遍全世界， 并且现在已经有100,000成员 遍布50个国家。 而且这场运动只是被一个非常简单和明智的信条所驱使， 那就是，当我们以不紧不慢的速度种植、烹饪还有食用食物的时候， 我们从食物当中， 将获得更多快乐和健康 我认为有机农业运动的 蓬勃发展，以及农场主市场的复兴， 也体现出 人们非常想从 享用、烹饪食物以及种植食物的工业化方式 中逃离出来。 他们想要慢些的节奏。 而从慢食运动中产生了 被称之为慢活城市的运动，从意大利开始 却已经传遍欧洲和其它地方。 而在这一运动中，城市 开始重新考虑如何规划城市景观， 能鼓励人们去——去放慢节奏 去闻闻玫瑰花，而且相互交流。 所以他们可能会交通， 或是放置公园长椅，或是设置一些绿地面积。
 
And in some ways, these changes add up to more than the sum of their parts, because I think when a Slow City becomes officially a Slow City, it's kind of like a philosophical16 declaration. It's saying to the rest of world, and to the people in that town, that we believe that in the 21st century, slowness has a role to play. In medicine, I think a lot of people are deeply disillusioned17 with the kind of quick-fix mentality18 you find in conventional medicine. And millions of them around the world are turning to complementary and alternative forms of medicine, which tend to tap into sort of slower, gentler, more holistic19 forms of healing. Now, obviously the jury is out on many of these complementary therapies, and I personally doubt that the coffee enema will ever, you know, gain mainstream20 approval. But other treatments such as acupuncture21 and massage22, and even just relaxation23, clearly have some kind of benefit. And blue-chip medical colleges everywhere are starting to study these things to find out how they work, and what we might learn from them.
某种程度上，这些改变能出现一加一大于二的效果。 当一座号召慢活的城市变成了一座真正意义上的慢速城市， 就有点像一种哲学理性上的宣言。 它是在向世界其它地区宣称，也是向那座城市的人民宣称， 宣称我们相信在21世纪， 慢速将发挥其作用。 在医疗方面，我想很多人都深感幻想破灭 对于你在传统医疗中存在的 那种速效治疗想法的幻灭。 因此全球数以百万的人转向 补充和替代形式的医疗， 这种医疗倾向于使用比较 慢一些，柔和一些，更全面的治疗形式。 现在，对于许多的补充性治疗方法，明显还没有最后定论， 且我个人怀疑咖啡灌肠法 也不会得到大众的认同。 但是其他治疗方法 比如针灸和按摩，甚至只是放松法， 却明显的有一定好处。 且各处一流的医学院都正在 开始研究这些治疗方法，看它们如何产生效果， 以及我们能从这些方法中学到什么。
 
Sex. There's an awful lot of fast sex around, isn't there? I was coming to -- well -- no pun intended there. I was making my way, let's say, slowly to Oxford24, and I went through a news agent, and I saw a magazine, a men's magazine, and it said on the front, "How to bring your partner to orgasm in 30 seconds." So, you know, even sex is on a stopwatch these days. Now, you know, I like a quickie as much as the next person, but I think that there's an awful lot to be gained from slow sex -- from slowing down in the bedroom. You know, you tap into that -- those deeper, sort of, psychological, emotional, spiritual currents, and you get a better orgasm with the buildup. You can get more bang for your buck25, let's say. I mean, the Pointer Sisters said it most eloquently26, didn't they, when they sang the praises of "a lover with a slow hand." Now, we all laughed at Sting a few years ago when he went Tantric, but you fast-forward a few years, and now you find couples of all ages flocking to workshops, or maybe just on their own in their own bedrooms, finding ways to put on the brakes and have better sex. And of course, in Italy where -- I mean, Italians always seem to know where to find their pleasure -- they've launched an official Slow Sex movement.
关于性，四处都有非常多快速的性关系，不是么？ 我打算去 好吧——我没想暗示什么 我当时正往，这么说吧，慢慢的往牛津走， 然后我经过一个报刊亭，看到一本杂志， 一本男性杂志，在封面上写着， “如何在30秒内把你的伴侣带入性高潮。” 你们看见了，就连性 现在也用计秒表数着时间了。 现在 我差不多和其他人一样快速完事， 但我认为从缓慢的性生活中， 在卧室里放慢速度，我们能收获非常多。 你利用这些更深层的， 有点儿心理的，情感的，精神的电流， 那么你会得到一个更棒的累积起来的性高潮。 让我们这么说吧，你可以为你的身体得到更大的快乐。 我的意思是，指针姐妹合唱团把这个道理说得最动人，不是么， 她们为爱人缓慢游走的手唱赞歌。 几年前我们都嘲笑斯汀（歌手） 学习印度密宗性法（使缓慢持续）的事情 但是如果我们把时钟拨快几年，现在你会发现各个年龄层的夫妻 都去参加课程学习，或可能只是 在他们自己的卧室里寻找方法 来放缓步调，从而拥有更好的性生活。 当然，在意大利，我是说，意大利人看起来总是知道 到哪去找乐子 他们已经开展了一场正式的慢速性生活运动。
 
The workplace. Right across much of the world -- North America being a notable exception -- working hours have been coming down. And Europe is an example of that, and people finding that their quality of life improves as they're working less, and also that their hourly productivity goes up. Now, clearly there are problems with the 35-hour workweek in France -- too much, too soon, too rigid27. But other countries in Europe, notably28 the Nordic countries, are showing that it's possible to have a kick-ass economy without being a workaholic. And Norway, Sweden, Denmark and Finland now rank among the top six most competitive nations on Earth, and they work the kind of hours that would make the average American weep with envy. And if you go beyond sort of the country level, down at the micro-company level, more and more companies now are realizing that they need to allow their staff either to work fewer hours or just to unplug -- to take a lunch break, or to go sit in a quiet room, to switch off their Blackberrys and laptops -- you at the back -- mobile phones, during the work day or on the weekend, so that they have time to recharge and for the brain to slide into that kind of creative mode of thought.
在日常工作方面 世界大部分地方的 工作时间都已经有所减少 不过北美明显是个例外。 欧洲就是个减少工时的例子， 人们发现他们的生活质量上升了 随着工作时间的减少，工作时效也 提高了。 现在，很明显的，法国每周35小时 的工作时间存在问题 太多，太快，太死板。 但欧洲的其它国家，特别是在北欧国家， 事实表明无须工作成狂 也能拥有 一流的经济 挪威、瑞典、 丹麦以及芬兰现在 都位列世界六大最具竞争力的国家之列， 并且他们工作时间之短会使得一般的美国人 嫉妒得想哭。 而假如你越过这种国家层次， 往下看微观，公司层次， 现在越来越多的公司意识到 他们有必要让员工 或者减少工作时间，或者离开工作在 午餐时间休息一下，或者坐在一个安静的房间里， 关掉他们的黑莓手机——说你呢，后面那个 手机， 这些在工作日或周末的休息让他们有时间去充电 有时间让大脑进入 那种创造性思维模式。
 
It's not just, though, these days, adults who overwork, though, is it? It's children, too. I'm 37, and my childhood ended in the mid-'80s, and I look at kids now, and I'm just amazed by the way they race around with more homework, more tutoring, more extracurriculars than we would ever have conceived of a generation ago. And some of the most heartrending emails that I get on my website are actually from adolescents hovering29 on the edge of burnout, pleading with me to write to their parents, to help them slow down, to help them get off this full-throttle treadmill30. But thankfully, there is a backlash there in parenting as well, and you're finding that, you know, towns in the United States are now banding together and banning extracurriculars on a particular day of the month, so that people can, you know, decompress and have some family time, and slow down.
然而，现在并不只是 成年人工作超负荷，不是么？小孩子也是。 我37岁，而我80年代中期才结束童年， 而现在我看着孩子们，看着他们赶着做 家庭作业，忙着补习 参加课外活动， 繁忙程度是我们这一代人从没想过的，我就感到很吃惊。 而我在我的网站上收到的最令人 痛心的邮件 事实上就是出自徘徊在疲劳殆尽边缘的青少年之手 他们恳求我 给他们的家长写信， 帮助他们放慢节奏，帮助他们摆脱 这超速的运转。 但也谢天谢地，也有一些父母在反思， 大家会发现，美国的城市 现在开始联合行动，在每个月特定的一天 禁止课外课程，这样人们就能， 就能释放压力，拥有家庭时间，以此放慢步调。
 
Homework is another thing. There are homework bans springing up all over the developed world in schools which had been piling on the homework for years, and now they're discovering that less can be more. So there was a case up in Scotland recently where a fee-paying, high-achieving private school banned homework for everyone under the age of 13, and the high-achieving parents freaked out and said, "What are you -- you know, our kids will fall" -- the headmaster said, "No, no, your children need to slow down at the end of the day." And just this last month, the exam results came in, and in math, science, marks went up 20 percent on average last year. And I think what's very revealing is that the elite31 universities, who are often cited as the reason that people drive their kids and hothouse them so much, are starting to notice the caliber32 of students coming to them is falling. These kids have wonderful marks; they have CVs jammed with extracurriculars, to the point that would make your eyes water. But they lack spark; they lack the ability to think creatively and think outside -- they don't know how to dream. And so what these Ivy33 League schools, and Oxford and Cambridge and so on, are starting to send a message to parents and students that they need to put on the brakes a little bit. And in Harvard, for instance, they send out a letter to undergraduates -- freshmen34 -- telling them that they'll get more out of life, and more out of Harvard, if they put on the brakes, if they do less, but give time to things, the time that things need, to enjoy them, to savor35 them. And even if they sometimes do nothing at all. And that letter is called -- very revealing, I think -- "Slow Down!" -- with an exclamation36 mark on the end.
家庭作业是另一回事。家庭作业禁令 在发达国家的学校非常普遍， 一些学校以前曾有家庭作业成堆的现象， 而现在他们发现作业数量少，质量可能更好。 因此，最近苏格兰出现一件实例 有一间苏格兰的高学费且高回报的私立学校 对13岁以下的学生 禁止布置家庭作业， 这让期望很高的父母吓了一跳并说， “你们在干什么，这样我们孩子的成绩会下降”校长却说， “不会，不会，你们的孩子需要在放学后放松下来。” 而就在上个月，考试成绩出来， 在数学，科学等课程上，分数上升了百分之二十 和去年平均成绩比。 而我认为非常具有启发意义的是 进入一流大学常常是家长驱使孩子 努力学习的原因，而这些大学却发现 他们学生的素质正在下降。 这些孩子拥有很棒的成绩， 他们的简历里写满了参加课外活动的经历， 多到会让你看了想哭的程度。 然而他们却缺乏活力，他们缺乏 创造性思考和独立思考的能力 他们不知道如何想象。因此，这些常春藤高校 以及牛津、剑桥等大学，开始向家长和学生们发出信息 表示家长学生们需要对此做出一些补救行动。 以哈佛大学为例，他们向 本科大一新生发出一封信 告诉他们，他们能从日常生活，从哈佛大学收获更多， 假如他们能减缓过于紧张的步调；假如他们能稍稍放松自己， 把时间放在那些有需要的事情上，给予那些事情足够的时间 好好享受，体味这些事情。 而有时候即使他们什么也不做（也能有很好的效果）。 我认为那封信的题目非常具有启发性，它叫 “放慢速度！”——以一个感叹号结尾。
 
So wherever you look, the message, it seems to me, is the same: that less is very often more, that slower is very often better. But that said, of course, it's not that easy to slow down, is it? I mean, you heard that I got a speeding ticket while I was researching my book on the benefits of slowness, and that's true, but that's not all of it. I was actually en route to a dinner held by Slow Food at the time. And if that's not shaming enough, I got that ticket in Italy. And if any of you have ever driven on an Italian highway, you'll have a pretty good idea of how fast I was going.
所以不管你从哪个角度看，这一讯息，在我看来，都是一样的。 少一点常常意味更多， 慢一些意味着更好。 然而这样说，当然， 并不是说放慢速度那么容易，不是么？ 我的意思是，当我正在写关于“慢有何好处”的书时 拿到一张超速罚单， 这是真的，而且事实还远不止这样 那时候，我实际上是在前往 慢食俱乐部组织的一场晚宴途中。 如果这还不算丢脸的话，我还是在意大利拿的罚单。 如果你们中任何人曾在意大利高速公路上开过车的话， 你肯定知道我当时开得有多快。
 
But why is it so hard to slow down? I think there are various reasons. One is that speed is fun, you know, speed is sexy. It's all that adrenaline rush. It's hard to give it up. I think there's a kind of metaphysical dimension -- that speed becomes a way of walling ourselves off from the bigger, deeper questions. We fill our head with distraction37, with busyness, so that we don't have to ask, am I well? Am I happy? Are my children growing up right? Are politicians making good decisions on my behalf? Another reason -- although I think, perhaps, the most powerful reason -- why we find it hard to slow down is the cultural taboo38 that we've erected39 against slowing down. "Slow" is a dirty word in our culture. It's a byword for "lazy," "slacker," for being somebody who gives up. You know, "he's a bit slow." It's actually synonymous with being stupid.
但是为什么放慢速度如此之难？ 我认为原因有很多。 其一是速度快让人开心，你们知道的，速度快很性感。 这都是肾上腺冲动造成的。很难根除。 有一种哲学上的维度—— 在这种维度中，速度成为了把我们自身与 更大、更深层次问题隔离的壁垒。 我们脑子里充满着让我们分心和忙碌的事情， 使得我们不需要询问自己， 我还好么？我快乐么？我的孩子这样成长的方式是正确的么？ 政治家们的决定是否代表了我的利益？ 另一个原因我认为最强有力的原因也许是 之所以这么难慢下来，是源自文化中的一种行为定式 我们树立起的文化不允许我们慢下来。 缓慢在我们的文化中是个贬义词。 它是懒，懒虫的代名词， 是用来说那些做事容易放弃的人的。 “他有一点慢。”实际上是说 这个人有点蠢。
 
I guess what the Slow Movement -- the purpose of the Slow Movement, or its main goal, really, is to tackle that taboo, and to say that yes, sometimes slow is not the answer, that there is such a thing as "bad slow." You know, I got stuck on the M25, which is a ring road around London, recently, and spent three-and-a-half hours there. And I can tell you, that's really bad slow. But the new idea, the sort of revolutionary idea, of the Slow Movement, is that there is such a thing as "good slow," too. And good slow is, you know, taking the time to eat a meal with your family, with the TV switched off. Or taking the time to look at a problem from all angles in the office to make the best decision at work. Or even simply just taking the time to slow down and savor your life.
我想慢活运动的目的 或者说它的主要目标，事实上，就是去破除这种定式 是为了表明 有时候“该死的慢”的原因 并不是在于“慢”本身 我最近有一次被困在 伦敦的M25环线公路上， 而且在那里困了三个半小时。我可以告诉你， 那才是真正的“该死的慢” 但从另一个角度看 慢活运动所包含的有点颠覆性质的思想 是说，有一种慢是“积极的慢”。 积极的慢就是花些时间 和家人吃饭，没有电视机在旁边干扰。 或者是在办公室里花些时间把事情进行全面地梳理 从而做出最明智的决定 这是从工作角度来说。 又或者只是花些时间 慢下来 品味生活。
 
Now, one of the things that I found most uplifting about all of this stuff that's happened around the book since it came out, is the reaction to it. And I knew that when my book on slowness came out, it would be welcomed by the New Age brigade, but it's also been taken up, with great gusto, by the corporate40 world -- you know, business press, but also big companies and leadership organizations. Because people at the top of the chain, people like you, I think, are starting to realize that there's too much speed in the system, there's too much busyness, and it's time to find, or get back to that lost art of shifting gears. Another encouraging sign, I think, is that it's not just in the developed world that this idea's been taken up. In the developing world, in countries that are on the verge41 of making that leap into first world status -- China, Brazil, Thailand, Poland, and so on -- these countries have embraced the idea of the Slow Movement, many people in them, and there's a debate going on in their media, on the streets. Because I think they're looking at the West, and they're saying, "Well, we like that aspect of what you've got, but we're not so sure about that."
我发现自《慢活》一书出版以来 在所有发生的事情中，最令人振奋的 就是人们对这本书的反应。 我料想到，当这本关于慢活的书面市， 它会受到新生代的欢迎， 然而，它也同样被商界 津津乐道。不止那种 商业出版社，另外还有 大公司和组织的领导阶层的接纳。 因为像在座各位，处于领导链顶端的人，我想 他们开始意识到，在（组织）系统中 高速运作得有点过头了， 工作过于忙碌，是时候找回 那种已经遗失的慢速换挡艺术。 我觉得另一个令人鼓舞的现象 是不止在发达国家 人们开始接纳这种思想。在发展中国家中， 那些即将跨入 第一世界之列的国家——中国，巴西， 泰国、波兰以及其它一些国家 它们已经开始接受慢活运动的观点， 在媒体上，在大街小巷 也有关于此观点的争论。 因为他们关注着西方世界，他们认为， “嗯，我们对你们在这方面的观点很感兴趣， 但我们不很确定是不是真的可能（做到放慢速度）。”
So all of that said, is it, I guess, is it possible? That's really the main question before us today. Is it possible to slow down? And I'm happy to be able to say to you that the answer is a resounding42 yes. And I present myself as Exhibit A, a kind of reformed and rehabilitated43 speed-aholic. I still love speed. You know, I live in London, and I work as a journalist, and I enjoy the buzz and the busyness, and the adrenaline rush that comes from both of those things. I play squash and ice hockey, two very fast sports, and I wouldn't give them up for the world. But I've also, over the last year or so, got in touch with my inner tortoise.
他们所说的这些，确实如此， 这是可能的么？ 这确实是如今摆在我们面前的主要问题。是否可能 放慢速度？ 我很高兴我可以告诉你说 这个答案是，完全可能。 我自己就是一个实证 一个改过自新并且恢复正常的 曾经的速度狂人。 我仍然喜欢快速。我住在伦敦， 而且是个记者， 喜欢忙忙碌碌， 喜欢由此产生的肾上腺素的刺激。 我玩壁球，也玩冰球， 这两种都是非常讲究速度的运动，我绝不会放弃这两种运动。 但是在过去的一年多，我 与我内心的慢龟龟进行了交流
 
And what that means is that I no longer overload44 myself gratuitously45. My default mode is no longer to be a rush-aholic. I no longer hear time's winged chariot drawing near, or at least not as much as I did before. I can actually hear it now, because I see my time is ticking off. And the upshot of all of that is that I actually feel a lot happier, healthier, more productive than I ever have. I feel like I'm living my life rather than actually just racing46 through it. And perhaps, the most important measure of the success of this is that I feel that my relationships are a lot deeper, richer, stronger.
那意味着 我不去，我不再去 无缘无故的弄得自己负荷过重。 我的默认模式不再是 做一个大忙人。 我再 也听不到时间高速战车催促迫近的声音， 至少不再像以前我感觉到的那么多。 我现在能听到这种时间催促的声音，因为我看到演讲时间分分秒秒过去。 而所有这些的重点结论是 比起从前的我，我真的感到更快乐，更健康， 更有效率了。 我觉得我在享受 我的人生，而不是在匆忙度日。 也许，最重要的 衡量慢活成功的标志是 我感觉到和他人的关系更密切 感情更深了，联系更强了。
 
And for me, I guess, the litmus test for whether this would work, and what it would mean, was always going to be bedtime stories, because that's sort of where the journey began. And there too the news is rosy47. You know, at the end of the day, I go into my son's room. I don't wear a watch. I switch off my computer, so I can't hear the email pinging into the basket, and I just slow down to his pace and we read. And because children have their own tempo48 and internal clock, they don't do quality time, where you schedule 10 minutes for them to open up to you. They need you to move at their rhythm. I find that 10 minutes into a story, you know, my son will suddenly say, "You know, something happened in the playground today that really bothered me." And we'll go off and have a conversation on that. And I now find that bedtime stories used to be a box on my to-do list, something that I dreaded49, because it was so slow and I had to get through it quickly. It's become my reward at the end of the day, something I really cherish. And I have a kind of Hollywood ending to my talk this afternoon, which goes a little bit like this:
对我而言，我想衡量这种方式 是否产生作用，以及它的意义最直接的方法 还是要回到我给儿子说睡前故事的事，因为那是这个事情 的开端。而这个结果 很美好。 晚上，我走进儿子的卧室。 没戴表，关上了电脑， 这样我就听不见有新电子邮件到达的震动声， 我按着儿子的速度慢下来，我们一起阅读。 因为孩子们有自己的节奏和生物钟， 他们不管父母们计划的家庭时间 你计划10分钟让他们对你打开心怀。 而他们却要你跟着他们的节奏来行动。 10分钟进入了故事状态， 而我儿子却会忽然说，“你知道吗， 今天在操场上发生了些事情，真让我烦恼。” 然后我们就会不讲故事了，转而说说运动场发生了什么。 而我现在发现 它曾经只是一种 一项例行公事，成为我负担的睡前故事 这件耗时得让我想赶快完成它的睡前故事 现在变成了在一天结束时对我的奖励， 成为了我真的，真的很珍惜的事情。 我打算用一个好莱坞电影式的故事 结束我今天下午的演讲 大致是这样的：
 
a few months ago, I was getting ready to go on another book tour, and I had my bags packed. I was downstairs by the front door, and I was waiting for a taxi, and my son came down the stairs and he'd made a card for me. And he was carrying it. He'd gone and stapled50 two cards, very like these, together, and put a sticker of his favorite character, Tintin, on the front. And he said to me, or he handed this to me, and I read it, and it said, "To Daddy, love Benjamin." And I thought, "Aw, that's really sweet. Is that a good luck on the book tour card?" And he said, "No, no, no, Daddy -- this is a card for being the best story reader in the world." And I thought, "Yeah, you know, this slowing down thing really does work."Thank you very much.
几个月之前，我准备进行 新一轮新书外地宣传，行李都已经收拾好了。 我就在楼下门口等计程车， 这时我儿子走下楼， 他正拿着为我做的一张卡片。 他把两张卡片钉在一块，就像这些， 而且贴了他最喜欢的人物贴纸 丁丁（漫画人物，职业是记者）在卡片上。 接着他对我说， 或者这么说，他把卡片递给我，接着我读到， 卡片上写着，“致爸爸，爱你的本杰明。” 我就想说，“啊，这真是太棒了， 这是不是一张祝我外出顺利的好运卡呢？” 然而他说，“不，不是，不是，爸爸，这是一张 送给世界上故事讲得最好的人的卡片。” 接着我想，“看来放慢速度真他奶奶的管用啊...”非常感谢在座各位。
===============Quantumultx===============
[task_local]
#东东小窝
16 22 * * * https://gitee.com/lxk0301/jd_scripts/raw/master/jd_small_home.js, tag=东东小窝, img-url=https://raw.githubusercontent.com/58xinian/icon/master/ddxw.png, enabled=true

================Loon==============
[Script]
cron "16 22 * * *" script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_small_home.js, tag=东东小窝

===============Surge=================
东东小窝 = type=cron,cronexp="16 22 * * *",wake-system=1,timeout=3600,script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_small_home.js

============小火箭=========
东东小窝 = type=cron,script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_small_home.js, cronexpr="16 22 * * *", timeout=3600, enable=true
 */
const $ = new Env('东东小窝');
const notify = $.isNode() ? require('./sendNotify') : '';
//Node.js用户请在jdCookie.js处填写京东ck;
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';

//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '', message = '';
let isPurchaseShops = false;//是否一键加购商品到购物车，默认不加购
$.helpToken = [];
if ($.isNode()) {
  Object.keys(jdCookieNode).forEach((item) => {
    cookiesArr.push(jdCookieNode[item])
  })
  if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => {};
} else {
  let cookiesData = $.getdata('CookiesJD') || "[]";
  cookiesData = jsonParse(cookiesData);
  cookiesArr = cookiesData.map(item => item.cookie);
  cookiesArr.reverse();
  cookiesArr.push(...[$.getdata('CookieJD2'), $.getdata('CookieJD')]);
  cookiesArr.reverse();
  cookiesArr = cookiesArr.filter(item => item !== "" && item !== null && item !== undefined);
}
$.newShareCodes = [];
const JD_API_HOST = 'https://lkyl.dianpusoft.cn/api';

!(async () => {
  if (!cookiesArr[0]) {
    $.msg($.name, '【提示】请先获取京东账号一cookie\n直接使用NobyDa的京东签到获取', 'https://bean.m.jd.com/bean/signIndex.action', {"open-url": "https://bean.m.jd.com/bean/signIndex.action"});
    return;
  }
  for (let i = 0; i < cookiesArr.length; i++) {
    if (cookiesArr[i]) {
      cookie = cookiesArr[i];
      $.UserName = decodeURIComponent(cookie.match(/pt_pin=(.+?);/) && cookie.match(/pt_pin=(.+?);/)[1])
      $.index = i + 1;
      $.isLogin = true;
      $.nickName = '';
      message = '';
      await TotalBean();
      console.log(`\n*******开始【京东账号${$.index}】${$.nickName || $.UserName}********\n`);
      if (!$.isLogin) {
        $.msg($.name, `【提示】cookie已失效`, `京东账号${$.index} ${$.nickName || $.UserName}\n请重新登录获取\nhttps://bean.m.jd.com/bean/signIndex.action`, {"open-url": "https://bean.m.jd.com/bean/signIndex.action"});

        if ($.isNode()) {
          await notify.sendNotify(`${$.name}cookie已失效 - ${$.UserName}`, `京东账号${$.index} ${$.UserName}\n请重新登录获取cookie`);
        }
        continue
      }
      await smallHome();
    }
  }
  await updateInviteCodeCDN('https://gitee.com/lxk0301/updateTeam/raw/master/shareCodes/jd_updateSmallHomeInviteCode.json');
  for (let i = 0; i < cookiesArr.length; i++) {
    if (cookiesArr[i]) {
      cookie = cookiesArr[i];
      $.token = $.helpToken[i];
      $.UserName = decodeURIComponent(cookie.match(/pt_pin=(.+?);/) && cookie.match(/pt_pin=(.+?);/)[1])
      if ($.newShareCodes.length > 1) {
        console.log('----', (i + 1) % $.newShareCodes.length)
        let code = $.newShareCodes[(i + 1) % $.newShareCodes.length]['code']
        console.log(`\n${$.UserName} 去给自己的下一账号 ${decodeURIComponent($.newShareCodes[(i + 1) % $.newShareCodes.length]['cookie'].match(/pt_pin=(.+?);/) && $.newShareCodes[(i + 1) % $.newShareCodes.length]['cookie'].match(/pt_pin=(.+?);/)[1])}助力，助力码为 ${code}\n`)
        await createAssistUser(code, $.createAssistUserID);
      }
      console.log(`\n去帮助作者:LXK9301\n`)
      await helpFriends();
    }
  }
})()
    .catch((e) => {
      $.log('', `❌ ${$.name}, 失败! 原因: ${e}!`, '')
    })
    .finally(() => {
      $.done();
    })
async function smallHome() {
  await loginHome();
  await ssjjRooms();
  // await helpFriends();
  if (!$.isUnLock) return;
  await createInviteUser();
  await queryDraw();
  await lottery();
  await doAllTask();
  await queryByUserId();
  await queryFurnituresCenterList();
  await showMsg();
}
function showMsg() {
  return new Promise(resolve => {
    $.msg($.name, '', `【京东账号${$.index}】${$.nickName}\n${message}`);
    resolve()
  })
}
async function lottery() {
  if ($.freeDrawCount > 0) {
    await drawRecord($.lotteryId);
  } else {
    console.log(`免费抽奖机会今日已使用\n`)
  }
}

async function doChannelsListTask(taskId, taskType) {
  await queryChannelsList(taskId);
  for (let item of $.queryChannelsList) {
    if (item.showOrder === 1) {
      await $.wait(1000)
      await followChannel(taskId, item.id)
      await queryDoneTaskRecord(taskId, taskType);
    }
  }
}
async function helpFriends() {
  // await updateInviteCode();
  // if (!$.inviteCodes) await updateInviteCodeCDN();
  if ($.inviteCodes && $.inviteCodes['inviteCode']) {
    for (let item of $.inviteCodes.inviteCode) {
      if (!item) continue
      await createAssistUser(item, $.createAssistUserID);
    }
  }
}
async function doAllTask() {
  await queryAllTaskInfo();//获取任务详情列表$.taskList
  console.log(` 任务名称   完成进度 `)
  for (let item of $.taskList) {
    console.log(`${item.ssjjTaskInfo.name}      ${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum || (item.ssjjTaskInfo.type === 1 ? 4: 1)}`)
  }
  for (let item of $.taskList) {
    if (item.ssjjTaskInfo.type === 1) {
      //邀请好友助力自己
      $.createAssistUserID = item.ssjjTaskInfo.id;
      console.log(`createAssistUserID:${item.ssjjTaskInfo.id}`)
      console.log(`\n\n助力您的好友:${item.doneNum}人`)
    }
    if (item.ssjjTaskInfo.type === 2) {
      //每日打卡
      if (item.doneNum === (item.ssjjTaskInfo.awardOfDayNum || 1)) {
        console.log(`${item.ssjjTaskInfo.name}已完成（${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum || 1}）`)
        continue
      }
      await clock(item.ssjjTaskInfo.id, item.ssjjTaskInfo.awardWoB)
    }
    // 限时连连看
    if (item.ssjjTaskInfo.type === 3) {
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum || 1).fill('').length; i++) {
        await game(item.ssjjTaskInfo.id, item.doneNum);
      }
    }
    if (item.ssjjTaskInfo.type === 4) {
      //关注店铺
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum).fill('').length; i++) {
        await followShops('followShops', item.ssjjTaskInfo.id);//一键关注店铺
        await queryDoneTaskRecord(item.ssjjTaskInfo.id, item.ssjjTaskInfo.type);
      }
    }
    if (item.ssjjTaskInfo.type === 5) {
      //浏览店铺
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum).fill('').length; i++) {
        await browseChannels('browseShops', item.ssjjTaskInfo.id, item.browseId);
      }
    }
    if (item.ssjjTaskInfo.type === 6) {
      //关注4个频道
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      await doChannelsListTask(item.ssjjTaskInfo.id, item.ssjjTaskInfo.type)
    }
    if (item.ssjjTaskInfo.type === 7) {
      //浏览3个频道
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum || 1).fill('').length; i++) {
        await browseChannels('browseChannels', item.ssjjTaskInfo.id, item.browseId);
      }
    }
    isPurchaseShops = $.isNode() ? (process.env.PURCHASE_SHOPS ? process.env.PURCHASE_SHOPS : isPurchaseShops) : ($.getdata("isPurchaseShops") ? $.getdata("isPurchaseShops") : isPurchaseShops);
    if (isPurchaseShops && item.ssjjTaskInfo.type === 9) {
      //加购商品
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum).fill('').length; i++) {
        await followShops('purchaseCommodities', item.ssjjTaskInfo.id);//一键加购商品
        await queryDoneTaskRecord(item.ssjjTaskInfo.id, item.ssjjTaskInfo.type);
      }
    }
    if (item.ssjjTaskInfo.type === 10) {
      //浏览商品
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum).fill('').length; i++) {
        await browseChannels('browseCommodities', item.ssjjTaskInfo.id, item.browseId);
      }
    }
    if (item.ssjjTaskInfo.type === 11) {
      //浏览会场
      if (item.doneNum === item.ssjjTaskInfo.awardOfDayNum) {
        console.log(`${item.ssjjTaskInfo.name}已完成[${item.doneNum}/${item.ssjjTaskInfo.awardOfDayNum}]`)
        continue
      }
      for (let i = 0; i < new Array(item.ssjjTaskInfo.awardOfDayNum || 1).fill('').length; i++) {
        await browseChannels('browseMeetings' ,item.ssjjTaskInfo.id, item.browseId);
      }
      // await browseChannels('browseMeetings' ,item.ssjjTaskInfo.id, item.browseId);
      // await doAllTask();
    }
  }
}
function queryFurnituresCenterList() {
  return new Promise(resolve => {
    $.get(taskUrl(`ssjj-furnitures-center/queryFurnituresCenterList`), async (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                let { buy, list } = data.body;
                $.canBuyList = [];
                list.map((item, index) => {
                  if (buy.some((buyItem) => buyItem === item.id)) return
                  $.canBuyList.push(item);
                })
                $.canBuyList.sort(sortByjdBeanNum);
                if ($.canBuyList[0].needWoB <= $.woB) {
                  await furnituresCenterPurchase($.canBuyList[0].id, $.canBuyList[0].jdBeanNum);
                } else {
                  console.log(`\n兑换${$.canBuyList[0].jdBeanNum}京豆失败:当前wo币${$.woB}不够兑换所需的${$.canBuyList[0].needWoB}WO币`)
                  message += `【装饰领京豆】兑换${$.canBuyList[0].jdBeanNum}京豆失败,原因:WO币不够\n`;
                }
                // for (let canBuyItem of $.canBuyList) {
                //   if (canBuyItem.needWoB <= $.woB) {
                //     await furnituresCenterPurchase(canBuyItem.id, canBuyItem.jdBeanNum);
                //     break
                //   }
                // }
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//装饰领京豆
function furnituresCenterPurchase(id, jdBeanNum) {
  return new Promise(resolve => {
    $.post(taskPostUrl(`ssjj-furnitures-center/furnituresCenterPurchase/${id}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              message += `【装饰领京豆】${jdBeanNum}兑换成功\n`;
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}

//获取详情
function queryByUserId() {
  return new Promise(resolve => {
    $.get(taskUrl(`ssjj-wo-home-info/queryByUserId/2`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                message += `【小窝名】${data.body.name}\n`;
                $.woB = data.body.woB;
                message += `【当前WO币】${data.body.woB}\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//获取需要关注的频道列表
function queryChannelsList(taskId) {
  return new Promise(resolve => {
    $.get(taskUrl(`ssjj-task-channels/queryChannelsList/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                $.queryChannelsList = data.body;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}

//浏览频道，浏览会场，浏览商品，浏览店铺API
function browseChannels(functionID ,taskId, browseId) {
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/${functionID}/${taskId}/${browseId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            console.log(`${functionID === 'browseChannels' ? '浏览频道' : functionID === 'browseMeetings' ? '浏览会场' : functionID === 'browseShops' ? '浏览店铺' : '浏览商品'}`, data)
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                // message += `【限时连连看】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//记录已关注的频道
function queryDoneTaskRecord(taskId, taskType) {
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/queryDoneTaskRecord/${taskType}/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                // message += `【限时连连看】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//一键关注店铺，一键加购商品API
function followShops(functionID, taskId) {
  return new Promise(async resolve => {
    $.get(taskUrl(`/ssjj-task-record/${functionID}/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                console.log(`${functionID === 'followShops'? '一键关注店铺': '一键加购商品'}结果：${data.head.msg}`);
                // message += `【限时连连看】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//关注频道API
function followChannel(taskId, channelId) {
  return new Promise(async resolve => {
    $.get(taskUrl(`/ssjj-task-record/followChannel/${channelId}/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                // message += `【限时连连看】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function createInviteUser() {
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/createInviteUser`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                if (data.body.id) {
                  console.log(`\n您的${$.name}shareCode(每天都是变化的):【${data.body.id}】\n`);
                  $.shareCode = data.body.id;
                  $.newShareCodes.push({ 'code': data.body.id, 'token': $.token, cookie });
                }
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}

function createAssistUser(inviteId, taskId) {
  console.log(`${inviteId}, ${taskId}`);
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/createAssistUser/${inviteId}/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                console.log(`\n给好友${data.body.inviteId}:【${data.head.msg}】\n`)
              }
            } else {
              console.log(`助力失败${JSON.stringify(data)}}`);
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function game(taskId, index, awardWoB = 100) {
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/game/${index}/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                message += `【限时连连看】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function clock(taskId, awardWoB) {
  return new Promise(resolve => {
    $.get(taskUrl(`/ssjj-task-record/clock/${taskId}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                message += `【每日打卡】成功，活动${awardWoB}WO币\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function queryAllTaskInfo() {
  return new Promise(resolve => {
    $.get(taskUrl(`ssjj-task-info/queryAllTaskInfo/2`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                $.taskList = data.body;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve();
      }
    })
  })
}
//免费抽奖
function drawRecord(id) {
  return new Promise(resolve => {
    $.get(taskUrl(`ssjj-draw-record/draw/${id}`), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              if (data.body) {
                message += `【免费抽奖】获得：${data.body.name}\n`;
              } else {
                message += `【免费抽奖】未中奖\n`;
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//查询免费抽奖机会
function queryDraw() {
  return new Promise(resolve => {
    $.get(taskUrl("ssjj-draw-center/queryDraw"), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              $.freeDrawCount = data.body.freeDrawCount;//免费抽奖次数
              $.lotteryId = data.body.center.id;
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
//查询是否开启了此活动
function ssjjRooms() {
  return new Promise(resolve => {
    $.get(taskUrl("ssjj-rooms/info/%E5%AE%A2%E5%8E%85"), (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data.head.code === 200) {
              $.isUnLock = data.body.isUnLock;
              if (!$.isUnLock) {
                console.log(`京东账号${$.index}${$.nickName}未开启此活动\n`);
                $.msg($.name, '', `京东账号${$.index}${$.nickName}未开启此活动\n点击弹窗去开启此活动(￣▽￣)"`, {"open-url": "openjd://virtual?params=%7B%20%22category%22:%20%22jump%22,%20%22des%22:%20%22m%22,%20%22url%22:%20%22https://h5.m.jd.com/babelDiy/Zeus/2HFSytEAN99VPmMGZ6V4EYWus1x/index.html%22%20%7D"});
              }
            }
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function loginHome() {
  return new Promise(resolve => {
    const options = {
      "url": "https://jdhome.m.jd.com/saas/framework/encrypt/pin?appId=6d28460967bda11b78e077b66751d2b0",
      "headers": {
        "Accept": "*/*",
        "Accept-Encoding": "gzip, deflate, br",
        "Accept-Language": "zh-cn",
        "Connection": "keep-alive",
        "Content-Length": "0",
        "Content-Type": "application/json",
        "Cookie": cookie,
        "Host": "jdhome.m.jd.com",
        "Origin": "https://jdhome.m.jd.com",
        "Referer": "https://jdhome.m.jd.com/dist/taro/index.html/",
        "User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0"),
      }
    }
    $.post(options, async (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            await login(data.data);
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve()
      }
    })
  })
}
function login(userName) {
  return new Promise(resolve => {
    const body = {
      "body": {
        "client": 2,
        userName
      }
    };
    const options = {
      "url": `${JD_API_HOST}/user-info/login`,
      "body": JSON.stringify(body),
      "headers": {
        "Accept": "*/*",
        "Accept-Encoding": "gzip, deflate, br",
        "Accept-Language": "zh-cn",
        "Connection": "keep-alive",
        "Content-Type": "application/json",
        "Host": "lkyl.dianpusoft.cn",
        "Origin": "https://lkyl.dianpusoft.cn",
        "Referer": "https://h5.m.jd.com/babelDiy/Zeus/2HFSytEAN99VPmMGZ6V4EYWus1x/index.html",
        "User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0"),
      }
    }
    $.post(options, async (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          data = JSON.parse(data);
          if (data.head.code === 200) {
            $.token = data.head.token;
            $.helpToken.push(data.head.token)
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve(data);
      }
    })
  })
}
function updateInviteCode(url = 'https://raw.githubusercontent.com/LXK9301/updateTeam/master/jd_updateSmallHomeInviteCode.json') {
  return new Promise(resolve => {
    $.get({url}, async (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
        } else {
          $.inviteCodes = JSON.parse(data);
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve();
      }
    })
  })
}
function updateInviteCodeCDN(url) {
  return new Promise(async resolve => {
    $.get({url, headers:{"User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0")}}, async (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          $.inviteCodes = JSON.parse(data);
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve();
      }
    })
    await $.wait(3000)
    resolve();
  })
}
function taskUrl(url, body = {}) {
  return {
    url: `${JD_API_HOST}/${url}?body=${escape(body)}`,
    headers: {
      "Accept": "*/*",
      "Accept-Encoding": "gzip, deflate, br",
      "Accept-Language": "zh-CN,zh;q=0.9",
      "Connection": "keep-alive",
      "content-type": "application/json",
      "Host": "lkyl.dianpusoft.cn",
      "Referer": "https://h5.m.jd.com/babelDiy/Zeus/2HFSytEAN99VPmMGZ6V4EYWus1x/index.html",
      "token": $.token,
      "User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0")
    }
  }
}
function taskPostUrl(url) {
  return {
    url: `${JD_API_HOST}/${url}`,
    headers: {
      "Accept": "*/*",
      "Accept-Encoding": "gzip, deflate, br",
      "Accept-Language": "zh-CN,zh;q=0.9",
      "Connection": "keep-alive",
      "content-type": "application/json",
      "Host": "lkyl.dianpusoft.cn",
      "Referer": "https://h5.m.jd.com/babelDiy/Zeus/2HFSytEAN99VPmMGZ6V4EYWus1x/index.html",
      "token": $.token,
      "User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0")
    }
  }
}
function sortByjdBeanNum(a, b) {
  return b['jdBeanNum'] - a['jdBeanNum'];
}
function TotalBean() {
  return new Promise(async resolve => {
    const options = {
      "url": `https://wq.jd.com/user/info/QueryJDUserInfo?sceneval=2`,
      "headers": {
        "Accept": "application/json,text/plain, */*",
        "Content-Type": "application/x-www-form-urlencoded",
        "Accept-Encoding": "gzip, deflate, br",
        "Accept-Language": "zh-cn",
        "Connection": "keep-alive",
        "Cookie": cookie,
        "Referer": "https://wqs.jd.com/my/jingdou/my.shtml?sceneval=2",
        "User-Agent": $.isNode() ? (process.env.JD_USER_AGENT ? process.env.JD_USER_AGENT : (require('./USER_AGENTS').USER_AGENT)) : ($.getdata('JDUA') ? $.getdata('JDUA') : "jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2 CFNetwork/1206 Darwin/20.1.0")
      }
    }
    $.post(options, (err, resp, data) => {
      try {
        if (err) {
          console.log(`${JSON.stringify(err)}`)
          console.log(`${$.name} API请求失败，请检查网路重试`)
        } else {
          if (safeGet(data)) {
            data = JSON.parse(data);
            if (data['retcode'] === 13) {
              $.isLogin = false; //cookie过期
              return
            }
            $.nickName = data['base'].nickname;
          }
        }
      } catch (e) {
        $.logErr(e, resp)
      } finally {
        resolve();
      }
    })
  })
}
function safeGet(data) {
  try {
    if (typeof JSON.parse(data) == "object") {
      return true;
    }
  } catch (e) {
    console.log(e);
    console.log(`京东服务器访问数据为空，请检查自身设备网络情况`);
    return false;
  }
}
function jsonParse(str) {
  if (typeof str == "string") {
    try {
      return JSON.parse(str);
    } catch (e) {
      console.log(e);
      $.msg($.name, '', '请勿随意在BoxJs输入框修改内容\n建议通过脚本去获取cookie')
      return [];
    }
  }
}
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
